# å¦‚ä½•ä¿®å¤PDFä¸Šä¼ åæ˜¾ç¤ºç©ºç™½çš„é—®é¢˜

## ğŸ“‹ é—®é¢˜æè¿°

å½“æ‚¨ä¸Šä¼ PDFæ–‡ä»¶æ—¶ï¼š
- âœ… é¡µæ•°æ˜¾ç¤ºæ­£ç¡®
- âŒ ä½†æ‰€æœ‰é¡µé¢éƒ½æ˜¯ç©ºç™½çš„

è¿™æ˜¯å› ä¸ºä¹‹å‰ä½¿ç”¨çš„æ˜¯å ä½å®ç°ï¼Œæ²¡æœ‰çœŸæ­£æ¸²æŸ“PDFå†…å®¹ã€‚

---

## ğŸ”§ å¿«é€Ÿä¿®å¤ï¼ˆ3æ­¥æå®šï¼‰

### ç¬¬1æ­¥ï¼šå®‰è£…ç³»ç»Ÿä¾èµ–

æ ¹æ®æ‚¨çš„æ“ä½œç³»ç»Ÿé€‰æ‹©ï¼š

<details>
<summary><b>macOS ç”¨æˆ·</b></summary>

æ‰“å¼€ç»ˆç«¯ï¼Œè¿è¡Œï¼š

```bash
brew install pkg-config cairo pango libpng jpeg giflib librsvg pixman
```

å¦‚æœæ²¡æœ‰Homebrewï¼Œå…ˆå®‰è£…ï¼šhttps://brew.sh
</details>

<details>
<summary><b>Ubuntu/Debian Linux ç”¨æˆ·</b></summary>

æ‰“å¼€ç»ˆç«¯ï¼Œè¿è¡Œï¼š

```bash
sudo apt-get update
sudo apt-get install build-essential libcairo2-dev libpango1.0-dev libjpeg-dev libgif-dev librsvg2-dev
```
</details>

<details>
<summary><b>Windows ç”¨æˆ·</b></summary>

ä»¥ç®¡ç†å‘˜èº«ä»½æ‰“å¼€PowerShellæˆ–CMDï¼Œè¿è¡Œï¼š

```bash
npm install --global --production windows-build-tools
```
</details>

---

### ç¬¬2æ­¥ï¼šå®‰è£…Node.jsä¾èµ–

åœ¨é¡¹ç›®ç›®å½•æ‰“å¼€ç»ˆç«¯ï¼š

```bash
# æ–¹å¼1ï¼šä½¿ç”¨å¿«é€Ÿå®‰è£…è„šæœ¬ï¼ˆæ¨èï¼‰
./scripts/install-pdf-deps.sh

# æ–¹å¼2ï¼šæ‰‹åŠ¨å®‰è£…
cd backend
npm install
```

---

### ç¬¬3æ­¥ï¼šé‡å¯æœåŠ¡å™¨

åœæ­¢å½“å‰æœåŠ¡å™¨ï¼ˆæŒ‰ `Ctrl+C`ï¼‰ï¼Œç„¶åé‡æ–°å¯åŠ¨ï¼š

```bash
# åœ¨é¡¹ç›®æ ¹ç›®å½•
npm run dev

# æˆ–åœ¨backendç›®å½•
cd backend
npm run dev
```

---

## âœ… æµ‹è¯•éªŒè¯

ä¸Šä¼ ä¸€ä¸ªPDFæ–‡ä»¶ï¼Œåº”è¯¥èƒ½çœ‹åˆ°ï¼š
1. âœ… é¡µé¢å†…å®¹æ­£å¸¸æ˜¾ç¤º
2. âœ… æ–‡å­—æ¸…æ™°å¯è¯»
3. âœ… å›¾ç‰‡æ­£ç¡®æ¸²æŸ“
4. âœ… å¸ƒå±€ä¿æŒå®Œæ•´

---

## â“ å¸¸è§é—®é¢˜

### Q1: canvaså®‰è£…å¤±è´¥æ€ä¹ˆåŠï¼Ÿ

**ç­”**ï¼šå¯èƒ½æ˜¯ç³»ç»Ÿä¾èµ–æ²¡è£…å¥½ã€‚è¯·ç¡®ä¿å®Œæˆäº†"ç¬¬1æ­¥"çš„ç³»ç»Ÿä¾èµ–å®‰è£…ã€‚

macOSç”¨æˆ·å¸¸è§é”™è¯¯ï¼š
```
Package cairo was not found
```
è§£å†³ï¼š`brew install cairo`

---

### Q2: ä¸Šä¼ PDFåæ˜¾ç¤º"PDFæ¸²æŸ“å¤±è´¥"

**å¯èƒ½åŸå› **ï¼š
- PDFæ–‡ä»¶æŸåæˆ–åŠ å¯†
- PDFå¤ªå¤§ï¼ˆè¶…è¿‡50MBï¼‰
- å†…å­˜ä¸è¶³

**è§£å†³æ–¹æ³•**ï¼š
1. å°è¯•ç”¨å…¶ä»–PDFå·¥å…·é‡æ–°ä¿å­˜PDF
2. å‹ç¼©PDFæ–‡ä»¶
3. åˆ†æ‰¹å¤„ç†å¤§æ–‡ä»¶

---

### Q3: Windowsç”¨æˆ·å®‰è£…windows-build-toolså¤±è´¥

**ç­”**ï¼šå°è¯•ä»¥ä¸‹æ–¹æ³•ï¼š

1. ç¡®ä¿ä»¥ç®¡ç†å‘˜èº«ä»½è¿è¡Œ
2. æˆ–è€…å®‰è£…Visual Studio Build Toolsï¼šhttps://visualstudio.microsoft.com/downloads/

---

### Q4: å®‰è£…é€Ÿåº¦å¾ˆæ…¢

**ç­”**ï¼šcanvasæ˜¯ä¸€ä¸ªè¾ƒå¤§çš„åŒ…ï¼Œé¦–æ¬¡å®‰è£…å¯èƒ½éœ€è¦5-10åˆ†é’Ÿï¼Œè¯·è€å¿ƒç­‰å¾…ã€‚

å¯ä»¥åˆ‡æ¢npmé•œåƒåŠ é€Ÿï¼š
```bash
npm config set registry https://registry.npmmirror.com
```

---

## ğŸš€ æ€§èƒ½è¯´æ˜

æ¸²æŸ“é€Ÿåº¦å‚è€ƒï¼š
- å°æ–‡ä»¶ï¼ˆ1-10é¡µï¼‰ï¼šçº¦ 3-5ç§’
- ä¸­ç­‰æ–‡ä»¶ï¼ˆ10-30é¡µï¼‰ï¼šçº¦ 10-20ç§’  
- å¤§æ–‡ä»¶ï¼ˆ30-50é¡µï¼‰ï¼šçº¦ 30-60ç§’

**æç¤º**ï¼šä¸Šä¼ å¤§PDFæ—¶ä¼šæœ‰çŸ­æš‚ç­‰å¾…ï¼Œè¿™æ˜¯æ­£å¸¸çš„ã€‚

---

## ğŸ“ æŠ€æœ¯ç»†èŠ‚

### æ–°å¢åŠŸèƒ½
- ä½¿ç”¨ `pdfjs-dist` è§£æPDFï¼ˆMozillaå®˜æ–¹åº“ï¼‰
- ä½¿ç”¨ `canvas` æ¸²æŸ“é¡µé¢ä¸ºå›¾ç‰‡
- è‡ªåŠ¨ä¼˜åŒ–å›¾ç‰‡è´¨é‡å’Œå°ºå¯¸

### ä¿®æ”¹çš„æ–‡ä»¶
- âœï¸ `backend/package.json` - æ·»åŠ ä¾èµ–
- âœï¸ `backend/src/controllers/upload.controller.ts` - æ”¹ç”¨çœŸå®æ¸²æŸ“
- âœ¨ `backend/src/utils/pdfRenderer.ts` - æ–°å¢PDFæ¸²æŸ“å·¥å…·

---

## ğŸ’¡ éœ€è¦å¸®åŠ©ï¼Ÿ

å¦‚æœé‡åˆ°é—®é¢˜ï¼š

1. æŸ¥çœ‹ç»ˆç«¯çš„è¯¦ç»†é”™è¯¯ä¿¡æ¯
2. å‚è€ƒ `PDFæ¸²æŸ“å‡çº§è¯´æ˜.md` è·å–æ›´å¤šæŠ€æœ¯ç»†èŠ‚
3. ç¡®ä¿Node.jsç‰ˆæœ¬ >= 16
4. ç¡®ä¿ç³»ç»Ÿæœ‰è¶³å¤Ÿçš„ç£ç›˜ç©ºé—´å’Œå†…å­˜

---

**ç¥ä½¿ç”¨æ„‰å¿«ï¼** ğŸ‰

